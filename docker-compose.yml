services:
  app:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: franchise-app
    ports:
      - "8080:8080"
    environment:
      # URL con tu endpoint real de AWS
      - SPRING_R2DBC_URL=r2dbc:mysql://franchise-db.cnsiekmq8c9p.us-east-2.rds.amazonaws.com:3306/franchise_db
      - SPRING_R2DBC_USERNAME=admin
      - SPRING_R2DBC_PASSWORD=Gera123456+*
      
      # Mantenlo en 'always' para que Docker cree las tablas si no existen
      - SPRING_SQL_INIT_MODE=always
      
      # Logs para monitorear la conexi√≥n desde el contenedor
      - LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_R2DBC=DEBUG
      - LOGGING_LEVEL_COM_FRANCHISE=DEBUG